---
import { Image } from 'astro:assets';

interface Props {
  images: ImageMetadata[];
}

const { images } = Astro.props;
---

<div class="swiper">
  <div class="swiper-wrapper">
    {
      images.map((image) => (
        <div class="swiper-slide">
          <Image src={image} alt="carousel" />
        </div>
      ))
    }
  </div>

  <div class="swiper-pagination"></div>
</div>

<style lang="scss">
  .swiper {
    width: 100%;
    height: 100%;

    .swiper-wrapper {
      width: 100%;
      height: 100%;
      filter: opacity(0.7) blur(1px);

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }
  }
</style>

<script>
  import Swiper from 'swiper';
  import { Pagination, Autoplay } from 'swiper/modules';
  import 'swiper/css/bundle';

  export const swiperConfig = {
    modules: [Pagination, Autoplay],
    loop: true,
    autoplay: {
      delay: 2000,
      disableOnInteraction: false,
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    scrollbar: {
      el: '.swiper-scrollbar',
    },
  };

  new Swiper('.swiper', swiperConfig);
</script>
